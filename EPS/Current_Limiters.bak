EESchema Schematic File Version 2
LIBS:EPS-rescue
LIBS:power
LIBS:device
LIBS:switches
LIBS:relays
LIBS:motors
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:stm32f446re
LIBS:max668_669
LIBS:ina139
LIBS:tps54302
LIBS:bq29209
LIBS:max40200
LIBS:tps7a7002
LIBS:max5395
LIBS:ina210
LIBS:ncs20071
LIBS:EPS-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 8 14
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L NCS20071 OPAMP?
U 1 1 5A8CBCA6
P 9200 2000
F 0 "OPAMP?" H 9200 2000 60  0000 C CNN
F 1 "NCS20071" H 9225 2075 60  0000 C CNN
F 2 "" H 9200 2000 60  0001 C CNN
F 3 "" H 9200 2000 60  0001 C CNN
	1    9200 2000
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 5A8CBD3F
P 9150 1775
F 0 "R?" V 9230 1775 50  0000 C CNN
F 1 "R" V 9150 1775 50  0000 C CNN
F 2 "" V 9080 1775 50  0001 C CNN
F 3 "" H 9150 1775 50  0001 C CNN
	1    9150 1775
	0    -1   -1   0   
$EndComp
$Comp
L R R?
U 1 1 5A8CBDC4
P 8575 2750
F 0 "R?" V 8655 2750 50  0000 C CNN
F 1 "R" V 8575 2750 50  0000 C CNN
F 2 "" V 8505 2750 50  0001 C CNN
F 3 "" H 8575 2750 50  0001 C CNN
	1    8575 2750
	-1   0    0    1   
$EndComp
$Comp
L R R?
U 1 1 5A8CBDEC
P 8750 2750
F 0 "R?" V 8830 2750 50  0000 C CNN
F 1 "R" V 8750 2750 50  0000 C CNN
F 2 "" V 8680 2750 50  0001 C CNN
F 3 "" H 8750 2750 50  0001 C CNN
	1    8750 2750
	-1   0    0    1   
$EndComp
Wire Wire Line
	8575 2600 8750 2600
Wire Wire Line
	8675 2600 8675 2400
Connection ~ 8675 2600
Wire Wire Line
	8000 2150 8675 2150
$Comp
L GND #PWR?
U 1 1 5A8CBE86
P 8675 2275
F 0 "#PWR?" H 8675 2025 50  0001 C CNN
F 1 "GND" H 8675 2125 50  0000 C CNN
F 2 "" H 8675 2275 50  0001 C CNN
F 3 "" H 8675 2275 50  0001 C CNN
	1    8675 2275
	0    1    1    0   
$EndComp
Wire Wire Line
	9650 2400 9650 2550
Wire Wire Line
	9650 2550 9850 2550
$Comp
L R R?
U 1 1 5A8CBF5E
P 9850 2800
F 0 "R?" V 9930 2800 50  0000 C CNN
F 1 "R" V 9850 2800 50  0000 C CNN
F 2 "" V 9780 2800 50  0001 C CNN
F 3 "" H 9850 2800 50  0001 C CNN
	1    9850 2800
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR?
U 1 1 5A8CBF8A
P 8750 2900
F 0 "#PWR?" H 8750 2650 50  0001 C CNN
F 1 "GND" H 8750 2750 50  0000 C CNN
F 2 "" H 8750 2900 50  0001 C CNN
F 3 "" H 8750 2900 50  0001 C CNN
	1    8750 2900
	1    0    0    -1  
$EndComp
Text HLabel 8575 2900 3    60   Input ~ 0
PV2
$Comp
L Q_NMOS_GSD Q?
U 1 1 5A8CBFC8
P 8000 1950
F 0 "Q?" H 8200 2000 50  0000 L CNN
F 1 "Q_NMOS_GSD" V 7900 1975 50  0000 L CNN
F 2 "" H 8200 2050 50  0001 C CNN
F 3 "" H 8000 1950 50  0001 C CNN
	1    8000 1950
	0    -1   -1   0   
$EndComp
$Comp
L Q_PMOS_GSD Q?
U 1 1 5A8CC055
P 8400 1525
F 0 "Q?" H 8600 1575 50  0000 L CNN
F 1 "Q_PMOS_GSD" V 8350 1625 50  0000 L CNN
F 2 "" H 8600 1625 50  0001 C CNN
F 3 "" H 8400 1525 50  0001 C CNN
	1    8400 1525
	0    1    -1   0   
$EndComp
$Comp
L R R?
U 1 1 5A8CC0DC
P 8350 1850
F 0 "R?" V 8430 1850 50  0000 C CNN
F 1 "R" V 8350 1850 50  0000 C CNN
F 2 "" V 8280 1850 50  0001 C CNN
F 3 "" H 8350 1850 50  0001 C CNN
	1    8350 1850
	0    1    1    0   
$EndComp
Wire Wire Line
	7800 1850 7800 1725
Connection ~ 7800 1725
Wire Wire Line
	7550 1725 8400 1725
Wire Wire Line
	8625 2150 8625 1775
Wire Wire Line
	8625 1775 9000 1775
Connection ~ 8625 2150
Wire Wire Line
	9300 1775 9850 1775
Wire Wire Line
	9850 1775 9850 2650
Connection ~ 9850 2550
Text HLabel 7250 1350 0    60   Input ~ 0
BOOSTED_V_2
$Comp
L R R?
U 1 1 5A8CC550
P 7400 1725
F 0 "R?" V 7480 1725 50  0000 C CNN
F 1 "R" V 7400 1725 50  0000 C CNN
F 2 "" V 7330 1725 50  0001 C CNN
F 3 "" H 7400 1725 50  0001 C CNN
	1    7400 1725
	0    1    1    0   
$EndComp
Wire Wire Line
	7250 1350 7250 1725
Wire Wire Line
	8200 1425 7250 1425
Connection ~ 7250 1425
Wire Wire Line
	8600 1425 9050 1425
$Comp
L GND #PWR?
U 1 1 5A8CC6C2
P 8500 1850
F 0 "#PWR?" H 8500 1600 50  0001 C CNN
F 1 "GND" H 8500 1700 50  0000 C CNN
F 2 "" H 8500 1850 50  0001 C CNN
F 3 "" H 8500 1850 50  0001 C CNN
	1    8500 1850
	1    0    0    -1  
$EndComp
Text HLabel 9050 1425 2    60   Input ~ 0
CURRENT_OUT
$Comp
L MCP4728 U?
U 1 1 5A8E686B
P 3950 2600
F 0 "U?" H 3450 2850 50  0000 L CNN
F 1 "MCP4728" H 4450 2850 50  0000 R CNN
F 2 "Housings_SSOP:MSOP-10_3x3mm_Pitch0.5mm" H 3950 2000 50  0001 C CNN
F 3 "" H 3950 2850 50  0001 C CNN
	1    3950 2600
	1    0    0    -1  
$EndComp
NoConn ~ 3350 2800
NoConn ~ 4550 2800
$Comp
L GND #PWR?
U 1 1 5A8E6877
P 3950 3100
F 0 "#PWR?" H 3950 2850 50  0001 C CNN
F 1 "GND" H 3950 2950 50  0000 C CNN
F 2 "" H 3950 3100 50  0001 C CNN
F 3 "" H 3950 3100 50  0001 C CNN
	1    3950 3100
	1    0    0    -1  
$EndComp
$Comp
L +3.3V #PWR?
U 1 1 5A8E687E
P 3950 1275
F 0 "#PWR?" H 3950 1125 50  0001 C CNN
F 1 "+3.3V" H 3950 1415 50  0000 C CNN
F 2 "" H 3950 1275 50  0001 C CNN
F 3 "" H 3950 1275 50  0001 C CNN
	1    3950 1275
	1    0    0    -1  
$EndComp
$Comp
L C C_DAC?
U 1 1 5A8E6884
P 4150 1600
F 0 "C_DAC?" H 4175 1700 50  0000 L CNN
F 1 "10u" H 4175 1500 50  0000 L CNN
F 2 "" H 4188 1450 50  0001 C CNN
F 3 "" H 4150 1600 50  0001 C CNN
	1    4150 1600
	0    -1   -1   0   
$EndComp
$Comp
L C C_DAC?
U 1 1 5A8E688B
P 4150 2000
F 0 "C_DAC?" H 4175 2100 50  0000 L CNN
F 1 "0.1u" H 4175 1900 50  0000 L CNN
F 2 "" H 4188 1850 50  0001 C CNN
F 3 "" H 4150 2000 50  0001 C CNN
	1    4150 2000
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR?
U 1 1 5A8E6892
P 4475 2000
F 0 "#PWR?" H 4475 1750 50  0001 C CNN
F 1 "GND" H 4475 1850 50  0000 C CNN
F 2 "" H 4475 2000 50  0001 C CNN
F 3 "" H 4475 2000 50  0001 C CNN
	1    4475 2000
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR?
U 1 1 5A8E6898
P 4475 1600
F 0 "#PWR?" H 4475 1350 50  0001 C CNN
F 1 "GND" H 4475 1450 50  0000 C CNN
F 2 "" H 4475 1600 50  0001 C CNN
F 3 "" H 4475 1600 50  0001 C CNN
	1    4475 1600
	0    -1   -1   0   
$EndComp
Text GLabel 4750 2175 1    60   Output ~ 0
DAC1
Text GLabel 4850 2175 1    60   Output ~ 0
DAC2
Text GLabel 4950 2175 1    60   Output ~ 0
DAC3
Wire Wire Line
	3075 2500 3350 2500
Wire Wire Line
	3075 2600 3350 2600
Wire Wire Line
	3075 2700 3350 2700
Wire Wire Line
	3950 3100 3950 3000
Wire Wire Line
	3950 1275 3950 2300
Wire Wire Line
	3950 2000 4000 2000
Wire Wire Line
	3950 1600 4000 1600
Connection ~ 3950 2000
Connection ~ 3950 1600
Wire Wire Line
	4300 2000 4475 2000
Wire Wire Line
	4475 1600 4300 1600
Wire Wire Line
	4750 2500 4550 2500
Wire Wire Line
	4750 2175 4750 2500
Wire Wire Line
	4850 2600 4550 2600
Wire Wire Line
	4950 2700 4550 2700
Wire Wire Line
	4850 2175 4850 2600
Wire Wire Line
	4950 2175 4950 2700
$Comp
L NCS20071 OPAMP?
U 1 1 5A8E6C30
P 9300 5025
F 0 "OPAMP?" H 9300 5025 60  0000 C CNN
F 1 "NCS20071" H 9325 5100 60  0000 C CNN
F 2 "" H 9300 5025 60  0001 C CNN
F 3 "" H 9300 5025 60  0001 C CNN
	1    9300 5025
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 5A8E6C36
P 9250 4800
F 0 "R?" V 9330 4800 50  0000 C CNN
F 1 "R" V 9250 4800 50  0000 C CNN
F 2 "" V 9180 4800 50  0001 C CNN
F 3 "" H 9250 4800 50  0001 C CNN
	1    9250 4800
	0    -1   -1   0   
$EndComp
$Comp
L R R?
U 1 1 5A8E6C3C
P 8675 5775
F 0 "R?" V 8755 5775 50  0000 C CNN
F 1 "R" V 8675 5775 50  0000 C CNN
F 2 "" V 8605 5775 50  0001 C CNN
F 3 "" H 8675 5775 50  0001 C CNN
	1    8675 5775
	-1   0    0    1   
$EndComp
$Comp
L R R?
U 1 1 5A8E6C42
P 8850 5775
F 0 "R?" V 8930 5775 50  0000 C CNN
F 1 "R" V 8850 5775 50  0000 C CNN
F 2 "" V 8780 5775 50  0001 C CNN
F 3 "" H 8850 5775 50  0001 C CNN
	1    8850 5775
	-1   0    0    1   
$EndComp
Wire Wire Line
	8675 5625 8850 5625
Wire Wire Line
	8775 5625 8775 5425
Connection ~ 8775 5625
Wire Wire Line
	8100 5175 8775 5175
$Comp
L GND #PWR?
U 1 1 5A8E6C4C
P 8775 5300
F 0 "#PWR?" H 8775 5050 50  0001 C CNN
F 1 "GND" H 8775 5150 50  0000 C CNN
F 2 "" H 8775 5300 50  0001 C CNN
F 3 "" H 8775 5300 50  0001 C CNN
	1    8775 5300
	0    1    1    0   
$EndComp
Wire Wire Line
	9750 5425 9750 5575
Wire Wire Line
	9750 5575 9950 5575
$Comp
L R R?
U 1 1 5A8E6C54
P 9950 5825
F 0 "R?" V 10030 5825 50  0000 C CNN
F 1 "R" V 9950 5825 50  0000 C CNN
F 2 "" V 9880 5825 50  0001 C CNN
F 3 "" H 9950 5825 50  0001 C CNN
	1    9950 5825
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR?
U 1 1 5A8E6C5A
P 8850 5925
F 0 "#PWR?" H 8850 5675 50  0001 C CNN
F 1 "GND" H 8850 5775 50  0000 C CNN
F 2 "" H 8850 5925 50  0001 C CNN
F 3 "" H 8850 5925 50  0001 C CNN
	1    8850 5925
	1    0    0    -1  
$EndComp
Text HLabel 8675 5925 3    60   Input ~ 0
PV3
$Comp
L Q_NMOS_GSD Q?
U 1 1 5A8E6C61
P 8100 4975
F 0 "Q?" H 8300 5025 50  0000 L CNN
F 1 "Q_NMOS_GSD" V 8000 5000 50  0000 L CNN
F 2 "" H 8300 5075 50  0001 C CNN
F 3 "" H 8100 4975 50  0001 C CNN
	1    8100 4975
	0    -1   -1   0   
$EndComp
$Comp
L Q_PMOS_GSD Q?
U 1 1 5A8E6C67
P 8500 4550
F 0 "Q?" H 8700 4600 50  0000 L CNN
F 1 "Q_PMOS_GSD" V 8450 4650 50  0000 L CNN
F 2 "" H 8700 4650 50  0001 C CNN
F 3 "" H 8500 4550 50  0001 C CNN
	1    8500 4550
	0    1    -1   0   
$EndComp
$Comp
L R R?
U 1 1 5A8E6C6D
P 8450 4875
F 0 "R?" V 8530 4875 50  0000 C CNN
F 1 "R" V 8450 4875 50  0000 C CNN
F 2 "" V 8380 4875 50  0001 C CNN
F 3 "" H 8450 4875 50  0001 C CNN
	1    8450 4875
	0    1    1    0   
$EndComp
Wire Wire Line
	7900 4875 7900 4750
Connection ~ 7900 4750
Wire Wire Line
	7650 4750 8500 4750
Wire Wire Line
	8725 5175 8725 4800
Wire Wire Line
	8725 4800 9100 4800
Connection ~ 8725 5175
Wire Wire Line
	9400 4800 9950 4800
Wire Wire Line
	9950 4800 9950 5675
Connection ~ 9950 5575
Text HLabel 7350 4375 0    60   Input ~ 0
BOOSTED_V_3
$Comp
L R R?
U 1 1 5A8E6C7D
P 7500 4750
F 0 "R?" V 7580 4750 50  0000 C CNN
F 1 "R" V 7500 4750 50  0000 C CNN
F 2 "" V 7430 4750 50  0001 C CNN
F 3 "" H 7500 4750 50  0001 C CNN
	1    7500 4750
	0    1    1    0   
$EndComp
Wire Wire Line
	7350 4375 7350 4750
Wire Wire Line
	8300 4450 7350 4450
Connection ~ 7350 4450
Wire Wire Line
	8700 4450 9150 4450
$Comp
L GND #PWR?
U 1 1 5A8E6C87
P 8600 4875
F 0 "#PWR?" H 8600 4625 50  0001 C CNN
F 1 "GND" H 8600 4725 50  0000 C CNN
F 2 "" H 8600 4875 50  0001 C CNN
F 3 "" H 8600 4875 50  0001 C CNN
	1    8600 4875
	1    0    0    -1  
$EndComp
Text HLabel 9150 4450 2    60   Input ~ 0
CURRENT_OUT
$Comp
L NCS20071 OPAMP?
U 1 1 5A8E6E5F
P 4800 4925
F 0 "OPAMP?" H 4800 4925 60  0000 C CNN
F 1 "NCS20071" H 4825 5000 60  0000 C CNN
F 2 "" H 4800 4925 60  0001 C CNN
F 3 "" H 4800 4925 60  0001 C CNN
	1    4800 4925
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 5A8E6E65
P 4750 4700
F 0 "R?" V 4830 4700 50  0000 C CNN
F 1 "R" V 4750 4700 50  0000 C CNN
F 2 "" V 4680 4700 50  0001 C CNN
F 3 "" H 4750 4700 50  0001 C CNN
	1    4750 4700
	0    -1   -1   0   
$EndComp
$Comp
L R R?
U 1 1 5A8E6E6B
P 4175 5675
F 0 "R?" V 4255 5675 50  0000 C CNN
F 1 "R" V 4175 5675 50  0000 C CNN
F 2 "" V 4105 5675 50  0001 C CNN
F 3 "" H 4175 5675 50  0001 C CNN
	1    4175 5675
	-1   0    0    1   
$EndComp
$Comp
L R R?
U 1 1 5A8E6E71
P 4350 5675
F 0 "R?" V 4430 5675 50  0000 C CNN
F 1 "R" V 4350 5675 50  0000 C CNN
F 2 "" V 4280 5675 50  0001 C CNN
F 3 "" H 4350 5675 50  0001 C CNN
	1    4350 5675
	-1   0    0    1   
$EndComp
Wire Wire Line
	4175 5525 4350 5525
Wire Wire Line
	4275 5525 4275 5325
Connection ~ 4275 5525
Wire Wire Line
	3600 5075 4275 5075
$Comp
L GND #PWR?
U 1 1 5A8E6E7B
P 4275 5200
F 0 "#PWR?" H 4275 4950 50  0001 C CNN
F 1 "GND" H 4275 5050 50  0000 C CNN
F 2 "" H 4275 5200 50  0001 C CNN
F 3 "" H 4275 5200 50  0001 C CNN
	1    4275 5200
	0    1    1    0   
$EndComp
Wire Wire Line
	5250 5325 5250 5475
Wire Wire Line
	5250 5475 5450 5475
$Comp
L R R?
U 1 1 5A8E6E83
P 5450 5725
F 0 "R?" V 5530 5725 50  0000 C CNN
F 1 "R" V 5450 5725 50  0000 C CNN
F 2 "" V 5380 5725 50  0001 C CNN
F 3 "" H 5450 5725 50  0001 C CNN
	1    5450 5725
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR?
U 1 1 5A8E6E89
P 4350 5825
F 0 "#PWR?" H 4350 5575 50  0001 C CNN
F 1 "GND" H 4350 5675 50  0000 C CNN
F 2 "" H 4350 5825 50  0001 C CNN
F 3 "" H 4350 5825 50  0001 C CNN
	1    4350 5825
	1    0    0    -1  
$EndComp
Text HLabel 4175 5825 3    60   Input ~ 0
PV1
$Comp
L Q_NMOS_GSD Q?
U 1 1 5A8E6E90
P 3600 4875
F 0 "Q?" H 3800 4925 50  0000 L CNN
F 1 "Q_NMOS_GSD" V 3500 4900 50  0000 L CNN
F 2 "" H 3800 4975 50  0001 C CNN
F 3 "" H 3600 4875 50  0001 C CNN
	1    3600 4875
	0    -1   -1   0   
$EndComp
$Comp
L Q_PMOS_GSD Q?
U 1 1 5A8E6E96
P 4000 4450
F 0 "Q?" H 4200 4500 50  0000 L CNN
F 1 "Q_PMOS_GSD" V 3950 4550 50  0000 L CNN
F 2 "" H 4200 4550 50  0001 C CNN
F 3 "" H 4000 4450 50  0001 C CNN
	1    4000 4450
	0    1    -1   0   
$EndComp
$Comp
L R R?
U 1 1 5A8E6E9C
P 3950 4775
F 0 "R?" V 4030 4775 50  0000 C CNN
F 1 "R" V 3950 4775 50  0000 C CNN
F 2 "" V 3880 4775 50  0001 C CNN
F 3 "" H 3950 4775 50  0001 C CNN
	1    3950 4775
	0    1    1    0   
$EndComp
Wire Wire Line
	3400 4775 3400 4650
Connection ~ 3400 4650
Wire Wire Line
	3150 4650 4000 4650
Wire Wire Line
	4225 5075 4225 4700
Wire Wire Line
	4225 4700 4600 4700
Connection ~ 4225 5075
Wire Wire Line
	4900 4700 5450 4700
Wire Wire Line
	5450 4700 5450 5575
Connection ~ 5450 5475
Text HLabel 2850 4275 0    60   Input ~ 0
BOOSTED_V_1
$Comp
L R R?
U 1 1 5A8E6EAC
P 3000 4650
F 0 "R?" V 3080 4650 50  0000 C CNN
F 1 "R" V 3000 4650 50  0000 C CNN
F 2 "" V 2930 4650 50  0001 C CNN
F 3 "" H 3000 4650 50  0001 C CNN
	1    3000 4650
	0    1    1    0   
$EndComp
Wire Wire Line
	2850 4275 2850 4650
Wire Wire Line
	3800 4350 2850 4350
Connection ~ 2850 4350
Wire Wire Line
	4200 4350 4650 4350
$Comp
L GND #PWR?
U 1 1 5A8E6EB6
P 4100 4775
F 0 "#PWR?" H 4100 4525 50  0001 C CNN
F 1 "GND" H 4100 4625 50  0000 C CNN
F 2 "" H 4100 4775 50  0001 C CNN
F 3 "" H 4100 4775 50  0001 C CNN
	1    4100 4775
	1    0    0    -1  
$EndComp
Text HLabel 4650 4350 2    60   Input ~ 0
CURRENT_OUT
Text GLabel 5450 5875 3    60   Input ~ 0
DAC1
Text GLabel 9850 2950 3    60   Input ~ 0
DAC2
Text GLabel 9950 5975 3    60   Input ~ 0
DAC3
Text GLabel 3075 2500 0    60   Input ~ 0
SCL
Text GLabel 3075 2600 0    60   Input ~ 0
SDA
Text GLabel 5250 5075 2    60   Input ~ 0
VBATT_EPS
Text GLabel 9750 5175 2    60   Input ~ 0
VBATT_EPS
Text GLabel 9650 2150 2    60   Input ~ 0
VBATT_EPS
Wire Notes Line
	1975 3625 10350 3625
Wire Notes Line
	10350 775  10350 6425
Wire Notes Line
	10350 775  1975 775 
Wire Notes Line
	1975 775  1975 6425
Wire Notes Line
	1975 6425 10350 6425
Wire Notes Line
	6400 6425 6400 775 
Text Notes 7700 1000 0    118  ~ 0
DIGITAL LOAD 2
Text Notes 7675 3900 0    118  ~ 0
DIGITAL LOAD 3
Text Notes 3575 3900 0    118  ~ 0
DIGITAL LOAD 1
Text Notes 2875 1000 0    118  ~ 0
I2C DAC CONTROL FOR LOADS
Text GLabel 3075 2700 0    60   Input ~ 0
LDAC
$EndSCHEMATC
